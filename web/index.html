<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>台語羅馬字、台語注音通用轉換器</title>
  <meta name="description" content="教育部台語羅馬字、白話字、台語注音、聲調數字通用轉換器。">
  <meta property="og:title" content="台語羅馬字、台語注音通用轉換器">
  <meta property="og:description" content="教育部台語羅馬字、白話字、台語注音、聲調數字通用轉換器。">
  <meta property="og:type" content="website">
  <style>
    @font-face {
      font-family: "jf-openhuninn";
      src: url("./jf-openhuninn-2.1.ttf") format("truetype");
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "jf-openhuninn", -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", "Helvetica Neue", Helvetica, Arial, sans-serif;
      font-size: 17px;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      background: #f5f5f7;
      color: #1d1d1f;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 4rem 1.5rem 2rem;
    }

    h1 {
      font-size: 2rem;
      font-weight: 700;
      letter-spacing: -0.025em;
      line-height: 1.2;
    }

    .subtitle {
      color: #86868b;
      margin-top: 0.5rem;
      margin-bottom: 2.5rem;
      font-size: 1.05rem;
      font-weight: 400;
      letter-spacing: -0.01em;
    }

    .card {
      width: 100%;
      max-width: 680px;
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04), 0 4px 12px rgba(0, 0, 0, 0.03);
      padding: 1.75rem;
    }

    textarea {
      width: 100%;
      min-height: 120px;
      padding: 1rem;
      border: 1px solid #d2d2d7;
      border-radius: 12px;
      font-size: 17px;
      font-family: inherit;
      resize: vertical;
      line-height: 1.65;
      color: #1d1d1f;
      background: #fafafa;
      transition: border-color 0.2s, background 0.2s, box-shadow 0.2s;
    }

    textarea::placeholder {
      color: #86868b;
    }

    textarea:focus {
      outline: none;
      border-color: #0071e3;
      background: #fff;
      box-shadow: 0 0 0 3px rgba(0, 113, 227, 0.15);
    }

    .results {
      margin-top: 1.5rem;
    }

    .result-row {
      display: flex;
      align-items: baseline;
      padding: 0.875rem 0;
      border-top: 1px solid #e8e8ed;
      gap: 1.25rem;
    }

    .result-label {
      flex-shrink: 0;
      width: 11rem;
      font-size: 15px;
      font-weight: 400;
      color: #86868b;
      letter-spacing: -0.01em;
    }

    .result-value {
      flex: 1;
      font-size: 17px;
      line-height: 2;
      color: #1d1d1f;
      user-select: all;
      -webkit-user-select: all;
      min-height: 1.5em;
      cursor: pointer;
      border-radius: 6px;
      padding: 0.125rem 0.375rem;
      margin: -0.125rem -0.375rem;
      transition: background 0.15s;
      position: relative;
    }

    .result-value:not(.placeholder):hover {
      background: #f5f5f7;
    }

    .result-value:not(.placeholder):active {
      background: #e8e8ed;
    }

    .result-value.copied::after {
      content: "Copied";
      position: absolute;
      right: 0.375rem;
      top: 50%;
      transform: translateY(-50%);
      font-size: 13px;
      color: #86868b;
      animation: fade-out 1s ease forwards;
    }

    @keyframes fade-out {

      0%,
      60% {
        opacity: 1;
      }

      100% {
        opacity: 0;
      }
    }

    .result-value.placeholder {
      color: #c5c5c7;
      cursor: default;
    }

    footer {
      margin-top: 2.5rem;
      font-size: 13px;
      color: #86868b;
      letter-spacing: -0.01em;
    }

    footer a {
      color: #86868b;
      text-decoration: none;
      transition: color 0.2s;
    }

    footer a:hover {
      color: #1d1d1f;
    }
  </style>
</head>

<body>
  <h1>台語羅馬字、台語注音通用轉換器</h1>
  <p class="subtitle">台語羅馬字、白話字、台語注音、聲調數字轉換</p>
  <div class="card">
    <textarea id="input" placeholder="Enter any word"></textarea>
    <div class="results">
      <div class="result-row">
        <div class="result-label">台羅正式版</div>
        <div class="result-value placeholder" id="out-tl">見本: la̍k-gue̍h-tang</div>
      </div>
      <div class="result-row">
        <div class="result-label">台羅傳統版</div>
        <div class="result-value placeholder" id="out-tl-trad">見本: la̍k-gue̍h-tang</div>
      </div>
      <div class="result-row">
        <div class="result-label">台羅聲調數字</div>
        <div class="result-value placeholder" id="out-tl-num">見本: lak8-gueh8-tang1</div>
      </div>
      <div class="result-row">
        <div class="result-label">白話字</div>
        <div class="result-value placeholder" id="out-poj">見本: la̍k-goe̍h-tang</div>
      </div>
      <div class="result-row">
        <div class="result-label">白話字聲調數字</div>
        <div class="result-value placeholder" id="out-poj-num">見本: lak8-goeh8-tang1</div>
      </div>
      <div class="result-row">
        <div class="result-label">台語注音</div>
        <div class="result-value placeholder" id="out-tps">見本: ㄌㄚㆻ̇ ㆣㄨㆤㆷ̇ ㄉㄤ</div>
      </div>
      <div class="result-row">
        <div class="result-label">台羅正式版 (永靖腔)</div>
        <div class="result-value placeholder" id="out-tl-yj">見本: la̍k-gue̍h-tang</div>
      </div>
      <div class="result-row">
        <div class="result-label">台羅傳統版 (永靖腔)</div>
        <div class="result-value placeholder" id="out-tl-trad-yj">見本: la̍k-gue̍h-tang</div>
      </div>
      <div class="result-row">
        <div class="result-label">台羅聲調數字 (永靖腔)</div>
        <div class="result-value placeholder" id="out-tl-num-yj">見本: lak8-gueh8-tang1</div>
      </div>
    </div>
  </div>

  <footer>&copy; 2026 Bîn-hiân · <a href="https://portaly.cc/siansiansu/support">贊助支持 ❤️</a></footer>

  <script type="module">
    import { convert, toToneNumber, toToneMark } from "./src/converter.js";
    import { isZhuyin, fromZhuyin } from "./src/zhuyin.js";

    const inputEl = document.getElementById("input");
    const rows = {
      tl: document.getElementById("out-tl"),
      tlTrad: document.getElementById("out-tl-trad"),
      tlNum: document.getElementById("out-tl-num"),
      tlYj: document.getElementById("out-tl-yj"),
      tlTradYj: document.getElementById("out-tl-trad-yj"),
      tlNumYj: document.getElementById("out-tl-num-yj"),
      poj: document.getElementById("out-poj"),
      pojNum: document.getElementById("out-poj-num"),
      tps: document.getElementById("out-tps"),
    };

    const placeholders = {
      tl: "見本: la̍k-gue̍h-tang",
      tlTrad: "見本: la̍k-gue̍h-tang",
      tlNum: "見本: lak8-gueh8-tang1",
      tlYj: "見本: la̍k-gue̍h-tang",
      tlTradYj: "見本: la̍k-gue̍h-tang",
      tlNumYj: "見本: lak8-gueh8-tang1",
      poj: "見本: la̍k-goe̍h-tang",
      pojNum: "見本: lak8-goeh8-tang1",
      tps: "見本: ㄌㄚㆻ̇ ㆣㄨㆤㆷ̇ ㄉㄤ",
    };

    function setResult(key, value) {
      const el = rows[key];
      if (value) {
        el.textContent = value;
        el.classList.remove("placeholder");
      } else {
        el.textContent = placeholders[key];
        el.classList.add("placeholder");
      }
    }

    function update() {
      const text = inputEl.value.trim();
      if (!text) {
        for (const key of Object.keys(rows)) setResult(key, "");
        return;
      }

      let numbered = "";
      try {
        numbered = isZhuyin(text) ? fromZhuyin(text) : toToneNumber(text);
      } catch { }

      let tlMarks = "";
      try { tlMarks = toToneMark(numbered, "tl"); } catch { }

      let pojMarks = "";
      try { pojMarks = toToneMark(numbered, "poj"); } catch { }

      let tlNum = "";
      try { tlNum = toToneNumber(tlMarks); } catch { }

      let pojNum = "";
      try { pojNum = toToneNumber(pojMarks).replace(/\u207f/g, "nn").replace(/o\u0358/g, "oo"); } catch { }

      let tps = "";
      try { tps = convert(tlMarks, "tl", "zhuyin"); } catch { }

      const toTrad = (s) => s.replace(/nn/g, "\u207f").replace(/oo/g, "o\u00b7");
      const tlTrad = toTrad(tlMarks);

      const toYongjing = (s) => s.normalize("NFD")
        .replace(/(?<![aeuoAEUO][\u0300-\u036f]?)i([\u0300-\u036f]?)n/gi,
          (m, mark) => (m[0] === "I" ? "E" : "e") + mark + "n")
        .normalize("NFC");
      const yjMarks = toYongjing(tlMarks);
      const yjTrad = toTrad(yjMarks);
      const yjNum = toYongjing(tlNum);

      setResult("tl", tlMarks);
      setResult("tlTrad", tlTrad);
      setResult("tlNum", tlNum);
      setResult("tlYj", yjMarks);
      setResult("tlTradYj", yjTrad);
      setResult("tlNumYj", yjNum);
      setResult("poj", pojMarks);
      setResult("pojNum", pojNum);
      setResult("tps", tps);
    }

    inputEl.addEventListener("input", update);
    inputEl.focus();

    document.querySelector(".results").addEventListener("click", (e) => {
      const el = e.target.closest(".result-value");
      if (!el || el.classList.contains("placeholder")) return;
      navigator.clipboard.writeText(el.textContent);
      el.classList.remove("copied");
      void el.offsetWidth;
      el.classList.add("copied");
      setTimeout(() => el.classList.remove("copied"), 1000);
    });
  </script>
</body>

</html>